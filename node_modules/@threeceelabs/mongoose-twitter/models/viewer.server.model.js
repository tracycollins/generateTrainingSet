// const moment = require("moment");
const mongoose = require("mongoose");
mongoose.Promise = global.Promise;
const Schema = mongoose.Schema;

const ViewerSchema = new Schema({
	userId: { 
		type: String,
		unique: true
	},
	viewerId: { 
		type: String
	},
	screenName: {
		type: String,
		trim: true
	},
	description: { 
		type: String,
		trim: true
	},
	url: { 
		type: String,
		trim: true
	},
	profileUrl: { 
		type: String,
		trim: true
	},
	profileImageUrl: { 
		type: String,
		trim: true
	},
	verified: { 
		type: Boolean,
		default: false
	},
	connected: { 
		type: Boolean,
		default: false
	},
	connectTime: { 
		type: Number,
		default: 0
	},
	disconnectTime: { 
		type: Number,
		default: 0
	},
	sessionId: {   // ??????? KLUDGE: for admin updates of sessions/users/admins
		type: String,
		trim: true
	},
	namespace: {   // ??????? KLUDGE: for admin updates of sessions/users/admins
		type: String,
		trim: true
	},
	ip: {   // ??????? KLUDGE: for admin updates of sessions/users/admins
		type: String,
		trim: true
	},
	domain: {   // ??????? KLUDGE: for admin updates of sessions/users/admins
		type: String,
		trim: true
	},
	createdAt: {   // in ms
		// type: String
		type: Date, default: Date.now
	},
	lastSeen: {   // in ms
		// type: String
		type: Date, default: Date.now
	},
	lastSession: {   
		type: String
	},
	sessions: {  
		type: [String]// Session Schema.Types.Mixeds
	}
});


mongoose.model("Viewer", ViewerSchema);