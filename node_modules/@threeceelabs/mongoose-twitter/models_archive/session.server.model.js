// const moment = require("moment");
const mongoose = require("mongoose");
mongoose.Promise = global.Promise;
const Schema = mongoose.Schema;

const SessionSchema = new Schema({
	sessionId: {   // just use socket.id???
		type: String,
		unique: true
	},
	socketId: {
		type: String
	},
	config: {
		type: Schema.Types.Mixed, // SESSION MODES: RANDOM, ANTONYM, SYNONYM, SCRIPT, USER-USER, GROUP  ( session.config.mode )
		default: { type: "USER", mode: "SYNONYM"} // SESSION TYPES: ADMIN, USER, UTIL, TEST_USER, TEST_VIEWER, VIEWER
	},
	ip: { 
		type: String,
		default: null
	},
	domain: { 
		type: String,
		default: null
	},
	userId: { 
		type: String,
		default: null
	},
	user: { 
		type: Schema.Types.Mixed
	},
	url: { 
		type: String
	},
	profileImageUrl: { 
		type: String
	},
	tags: { 
		type: Schema.Types.Mixed
	},
	namespace: { 
		type: String,
		default: null
	},
	createdAt: {   // in ms
		// type: String
		type: Date, default: Date.now
	},
	lastSeen: {   // in ms
		// type: String
		type: Date, default: Date.now
	},
	connected: { 
		type: Boolean,
		default: false
	},
	connectTime: { 
		type: Number,
		default: 0
	},
	disconnectTime: { 
		type: Number,
		default: 0
	},
	linkHashMap: {
		type: Schema.Types.Mixed,
		default: []
	},
	wordChainIndex: {
		type: Number,
		default: 0
	},
	wordChain: {
		type: Schema.Types.Mixed,
		default: []
	},
	fixedNodeId: {
		type: String
	}
});

// mongoose.model("Session", SessionSchema);